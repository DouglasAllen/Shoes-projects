>ruby send_to_socket.rb
HTTP/1.1 500 Internal Server Error

Content-Type: text/html

Content-Length: 69649

Connection: close

Server: thin 1.5.0 codename Knife



<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="NONE,NOARCHIVE" />
  <title>Rack::Lint::LintError at &#x2F;</title>
  <style type="text/css">
    html * { padding:0; margin:0; }
    body * { padding:10px 20px; }
    body * * { padding:0; }
    body { font:small sans-serif; }
    body>div { border-bottom:1px solid #ddd; }
    h1 { font-weight:normal; }
    h2 { margin-bottom:.8em; }
    h2 span { font-size:80%; color:#666; font-weight:normal; }
    h3 { margin:1em 0 .5em 0; }
    h4 { margin:0 0 .5em 0; font-weight: normal; }
    table {
        border:1px solid #ccc; border-collapse: collapse; background:white; }
    tbody td, tbody th { vertical-align:top; padding:2px 3px; }
    thead th {
        padding:1px 6px 1px 3px; background:#fefefe; text-align:left;
        font-weight:normal; font-size:11px; border:1px solid #ddd; }
    tbody th { text-align:right; color:#666; padding-right:.5em; }
    table.vars { margin:5px 0 2px 40px; }
    table.vars td, table.req td { font-family:monospace; }
    table td.code { width:100%;}
    table td.code div { overflow:hidden; }
    table.source th { color:#666; }
    table.source td {
        font-family:monospace; white-space:pre; border-bottom:1px solid #eee; }
    ul.traceback { list-style-type:none; }
    ul.traceback li.frame { margin-bottom:1em; }
    div.context { margin: 10px 0; }
    div.context ol {
        padding-left:30px; margin:0 10px; list-style-position: inside; }
    div.context ol li {
        font-family:monospace; white-space:pre; color:#666; cursor:pointer; }
    div.context ol.context-line li { color:black; background-color:#ccc; }
    div.context ol.context-line li span { float: right; }
    div.commands { margin-left: 40px; }
    div.commands a { color:black; text-decoration:none; }
    #summary { background: #ffc; }
    #summary h2 { font-weight: normal; color: #666; }
    #summary ul#quicklinks { list-style-type: none; margin-bottom: 2em; }
    #summary ul#quicklinks li { float: left; padding: 0 1em; }
    #summary ul#quicklinks>li+li { border-left: 1px #666 solid; }
    #explanation { background:#eee; }
    #template, #template-not-exist { background:#f6f6f6; }
    #template-not-exist ul { margin: 0 0 0 20px; }
    #traceback { background:#eee; }
    #requestinfo { background:#f6f6f6; padding-left:120px; }
    #summary table { border:none; background:transparent; }
    #requestinfo h2, #requestinfo h3 { position:relative; margin-left:-100px; }
    #requestinfo h3 { margin-bottom:-1em; }
    .error { background: #ffc; }
    .specific { color:#cc3300; font-weight:bold; }
  </style>
  <script type="text/javascript">
  //<!--
    function getElementsByClassName(oElm, strTagName, strClassName){
        // Written by Jonathan Snook, http://www.snook.ca/jon;
        // Add-ons by Robert Nyman, http://www.robertnyman.com
        var arrElements = (strTagName == "*" && document.all)? document.all :
        oElm.getElementsByTagName(strTagName);
        var arrReturnElements = new Array();
        strClassName = strClassName.replace(/\-/g, "\\-");
        var oRegExp = new RegExp("(^|\\s)" + strClassName + "(\\s|$$)");
        var oElement;
        for(var i=0; i<arrElements.length; i++){
            oElement = arrElements[i];
            if(oRegExp.test(oElement.className)){
                arrReturnElements.push(oElement);
            }
        }
        return (arrReturnElements)
    }
    function hideAll(elems) {
      for (var e = 0; e < elems.length; e++) {
        elems[e].style.display = 'none';
      }
    }
    window.onload = function() {
      hideAll(getElementsByClassName(document, 'table', 'vars'));
      hideAll(getElementsByClassName(document, 'ol', 'pre-context'));
      hideAll(getElementsByClassName(document, 'ol', 'post-context'));
    }
    function toggle() {
      for (var i = 0; i < arguments.length; i++) {
        var e = document.getElementById(arguments[i]);
        if (e) {
          e.style.display = e.style.display == 'none' ? 'block' : 'none';
        }
      }
      return false;
    }
    function varToggle(link, id) {
      toggle('v' + id);
      var s = link.getElementsByTagName('span')[0];
      var uarr = String.fromCharCode(0x25b6);
      var darr = String.fromCharCode(0x25bc);
      s.innerHTML = s.innerHTML == uarr ? darr : uarr;
      return false;
    }
    //-->
  </script>
</head>
<body>

<div id="summary">
  <h1>Rack::Lint::LintError at &#x2F;</h1>
  <h2>env missing required key SERVER_PORT</h2>
  <table><tr>
    <th>Ruby</th>
    <td>

      <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;lint.rb</code>: in <code>assert</code>, line 19

    </td>
  </tr><tr>
    <th>Web</th>
    <td><code>GET localhost:&#x2F;</code></td>
  </tr></table>

  <h3>Jump to:</h3>
  <ul id="quicklinks">
    <li><a href="#get-info">GET</a></li>
    <li><a href="#post-info">POST</a></li>
    <li><a href="#cookie-info">Cookies</a></li>
    <li><a href="#env-info">ENV</a></li>
  </ul>
</div>

<div id="traceback">
  <h2>Traceback <span>(innermost first)</span></h2>
  <ul class="traceback">

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;lint.rb</code>: in <code>assert</code>

          
          <div class="context" id="c6254688">
              
              <ol start="12" class="pre-context" id="pre6254688">
                
                <li onclick="toggle('pre6254688', 'post6254688')">
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">    # :stopdoc:
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">    class LintError &lt; RuntimeError; end
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">    module Assertion
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">      def assert(message, &amp;block)
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">        unless block.call
</li>
                
              </ol>
              

            <ol start="19" class="context-line">
              <li onclick="toggle('pre6254688', 'post6254688')">          raise LintError, message<span>...</span></li></ol>

              
              <ol start='20' class="post-context" id="post6254688">
                
                <li onclick="toggle('pre6254688', 'post6254688')">        end
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">      end
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">    end
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">    include Assertion
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">    ## This specification aims to formalize the Rack protocol.  You
</li>
                
                <li onclick="toggle('pre6254688', 'post6254688')">    ## can (and should) use Rack::Lint to enforce it.
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;lint.rb</code>: in <code>block in check_env</code>

          
          <div class="context" id="c7666548">
              
              <ol start="186" class="pre-context" id="pre7666548">
                
                <li onclick="toggle('pre7666548', 'post7666548')">      ## accepted specifications and must not be used otherwise.
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">      ##
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">      %w[REQUEST_METHOD SERVER_NAME SERVER_PORT
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">         QUERY_STRING
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">         rack.version rack.input rack.errors
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">         rack.multithread rack.multiprocess rack.run_once].each { |header|
</li>
                
              </ol>
              

            <ol start="193" class="context-line">
              <li onclick="toggle('pre7666548', 'post7666548')">        assert(&quot;env missing required key #{header}&quot;) { env.include? header }<span>...</span></li></ol>

              
              <ol start='194' class="post-context" id="post7666548">
                
                <li onclick="toggle('pre7666548', 'post7666548')">      }
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">      ## The environment must not contain the keys
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">      ## &lt;tt&gt;HTTP_CONTENT_TYPE&lt;&#x2F;tt&gt; or &lt;tt&gt;HTTP_CONTENT_LENGTH&lt;&#x2F;tt&gt;
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">      ## (use the versions without &lt;tt&gt;HTTP_&lt;&#x2F;tt&gt;).
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">      %w[HTTP_CONTENT_TYPE HTTP_CONTENT_LENGTH].each { |header|
</li>
                
                <li onclick="toggle('pre7666548', 'post7666548')">        assert(&quot;env contains #{header}, must use #{header[5,-1]}&quot;) {
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;lint.rb</code>: in <code>each</code>

          
          <div class="context" id="c7859496">
              
              <ol start="182" class="pre-context" id="pre7859496">
                
                <li onclick="toggle('pre7859496', 'post7859496')">      ## The server or the application can store their own data in the
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">      ## environment, too.  The keys must contain at least one dot,
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">      ## and should be prefixed uniquely.  The prefix &lt;tt&gt;rack.&lt;&#x2F;tt&gt;
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">      ## is reserved for use with the Rack core distribution and other
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">      ## accepted specifications and must not be used otherwise.
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">      ##
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">
</li>
                
              </ol>
              

            <ol start="189" class="context-line">
              <li onclick="toggle('pre7859496', 'post7859496')">      %w[REQUEST_METHOD SERVER_NAME SERVER_PORT<span>...</span></li></ol>

              
              <ol start='190' class="post-context" id="post7859496">
                
                <li onclick="toggle('pre7859496', 'post7859496')">         QUERY_STRING
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">         rack.version rack.input rack.errors
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">         rack.multithread rack.multiprocess rack.run_once].each { |header|
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">        assert(&quot;env missing required key #{header}&quot;) { env.include? header }
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">      }
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">
</li>
                
                <li onclick="toggle('pre7859496', 'post7859496')">      ## The environment must not contain the keys
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;lint.rb</code>: in <code>check_env</code>

          
          <div class="context" id="c8039904">
              
              <ol start="182" class="pre-context" id="pre8039904">
                
                <li onclick="toggle('pre8039904', 'post8039904')">      ## The server or the application can store their own data in the
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">      ## environment, too.  The keys must contain at least one dot,
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">      ## and should be prefixed uniquely.  The prefix &lt;tt&gt;rack.&lt;&#x2F;tt&gt;
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">      ## is reserved for use with the Rack core distribution and other
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">      ## accepted specifications and must not be used otherwise.
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">      ##
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">
</li>
                
              </ol>
              

            <ol start="189" class="context-line">
              <li onclick="toggle('pre8039904', 'post8039904')">      %w[REQUEST_METHOD SERVER_NAME SERVER_PORT<span>...</span></li></ol>

              
              <ol start='190' class="post-context" id="post8039904">
                
                <li onclick="toggle('pre8039904', 'post8039904')">         QUERY_STRING
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">         rack.version rack.input rack.errors
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">         rack.multithread rack.multiprocess rack.run_once].each { |header|
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">        assert(&quot;env missing required key #{header}&quot;) { env.include? header }
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">      }
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">
</li>
                
                <li onclick="toggle('pre8039904', 'post8039904')">      ## The environment must not contain the keys
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;lint.rb</code>: in <code>_call</code>

          
          <div class="context" id="c8216232">
              
              <ol start="35" class="pre-context" id="pre8216232">
                
                <li onclick="toggle('pre8216232', 'post8216232')">    def call(env=nil)
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      dup._call(env)
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">    end
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">    def _call(env)
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      ## It takes exactly one argument, the *environment*
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      assert(&quot;No env given&quot;) { env }
</li>
                
              </ol>
              

            <ol start="42" class="context-line">
              <li onclick="toggle('pre8216232', 'post8216232')">      check_env env<span>...</span></li></ol>

              
              <ol start='43' class="post-context" id="post8216232">
                
                <li onclick="toggle('pre8216232', 'post8216232')">
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      env[&#x27;rack.input&#x27;] = InputWrapper.new(env[&#x27;rack.input&#x27;])
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      env[&#x27;rack.errors&#x27;] = ErrorWrapper.new(env[&#x27;rack.errors&#x27;])
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      ## and returns an Array of exactly three values:
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      status, headers, @body = @app.call(env)
</li>
                
                <li onclick="toggle('pre8216232', 'post8216232')">      ## The *status*,
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;lint.rb</code>: in <code>call</code>

          
          <div class="context" id="c8277264">
              
              <ol start="29" class="pre-context" id="pre8277264">
                
                <li onclick="toggle('pre8277264', 'post8277264')">    ## after to catch all mistakes.
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">    ## = Rack applications
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">    ## A Rack application is a Ruby object (not a class) that
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">    ## responds to +call+.
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">    def call(env=nil)
</li>
                
              </ol>
              

            <ol start="36" class="context-line">
              <li onclick="toggle('pre8277264', 'post8277264')">      dup._call(env)<span>...</span></li></ol>

              
              <ol start='37' class="post-context" id="post8277264">
                
                <li onclick="toggle('pre8277264', 'post8277264')">    end
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">    def _call(env)
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">      ## It takes exactly one argument, the *environment*
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">      assert(&quot;No env given&quot;) { env }
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">      check_env env
</li>
                
                <li onclick="toggle('pre8277264', 'post8277264')">
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;showexceptions.rb</code>: in <code>call</code>

          
          <div class="context" id="c8352372">
              
              <ol start="17" class="pre-context" id="pre8352372">
                
                <li onclick="toggle('pre8352372', 'post8352372')">
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">    def initialize(app)
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">      @app = app
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">      @template = ERB.new(TEMPLATE)
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">    end
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">    def call(env)
</li>
                
              </ol>
              

            <ol start="24" class="context-line">
              <li onclick="toggle('pre8352372', 'post8352372')">      @app.call(env)<span>...</span></li></ol>

              
              <ol start='25' class="post-context" id="post8352372">
                
                <li onclick="toggle('pre8352372', 'post8352372')">    rescue StandardError, LoadError, SyntaxError =&gt; e
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">      exception_string = dump_exception(e)
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">      env[&quot;rack.errors&quot;].puts(exception_string)
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">      env[&quot;rack.errors&quot;].flush
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">
</li>
                
                <li onclick="toggle('pre8352372', 'post8352372')">      if prefers_plain_text?(env)
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;commonlogger.rb</code>: in <code>call</code>

          
          <div class="context" id="c8438484">
              
              <ol start="26" class="pre-context" id="pre8438484">
                
                <li onclick="toggle('pre8438484', 'post8438484')">    def initialize(app, logger=nil)
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">      @app = app
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">      @logger = logger
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">    end
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">    def call(env)
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">      began_at = Time.now
</li>
                
              </ol>
              

            <ol start="33" class="context-line">
              <li onclick="toggle('pre8438484', 'post8438484')">      status, header, body = @app.call(env)<span>...</span></li></ol>

              
              <ol start='34' class="post-context" id="post8438484">
                
                <li onclick="toggle('pre8438484', 'post8438484')">      header = Utils::HeaderHash.new(header)
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">      body = BodyProxy.new(body) { log(env, status, header, began_at) }
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">      [status, header, body]
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">    end
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">    private
</li>
                
                <li onclick="toggle('pre8438484', 'post8438484')">
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;sinatra-1.3.3&#x2F;lib&#x2F;sinatra&#x2F;base.rb</code>: in <code>call</code>

          
          <div class="context" id="c8473848">
              
              <ol start="129" class="pre-context" id="pre8473848">
                
                <li onclick="toggle('pre8473848', 'post8473848')">      env[&#x27;sinatra.commonlogger&#x27;] ? @app.call(env) : super
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">    end
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">    superclass.class_eval do
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">      alias call_without_check call unless method_defined? :call_without_check
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">      def call(env)
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">        env[&#x27;sinatra.commonlogger&#x27;] = true
</li>
                
              </ol>
              

            <ol start="136" class="context-line">
              <li onclick="toggle('pre8473848', 'post8473848')">        call_without_check(env)<span>...</span></li></ol>

              
              <ol start='137' class="post-context" id="post8473848">
                
                <li onclick="toggle('pre8473848', 'post8473848')">      end
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">    end
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">  end
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">  class NotFound &lt; NameError #:nodoc:
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">    def code ; 404 ; end
</li>
                
                <li onclick="toggle('pre8473848', 'post8473848')">  end
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;chunked.rb</code>: in <code>call</code>

          
          <div class="context" id="c10043016">
              
              <ol start="36" class="pre-context" id="pre10043016">
                
                <li onclick="toggle('pre10043016', 'post10043016')">    end
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">    def initialize(app)
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">      @app = app
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">    end
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">    def call(env)
</li>
                
              </ol>
              

            <ol start="43" class="context-line">
              <li onclick="toggle('pre10043016', 'post10043016')">      status, headers, body = @app.call(env)<span>...</span></li></ol>

              
              <ol start='44' class="post-context" id="post10043016">
                
                <li onclick="toggle('pre10043016', 'post10043016')">      headers = HeaderHash.new(headers)
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">      if env[&#x27;HTTP_VERSION&#x27;] == &#x27;HTTP&#x2F;1.0&#x27; ||
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">         STATUS_WITH_NO_ENTITY_BODY.include?(status) ||
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">         headers[&#x27;Content-Length&#x27;] ||
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">         headers[&#x27;Transfer-Encoding&#x27;]
</li>
                
                <li onclick="toggle('pre10043016', 'post10043016')">        [status, headers, body]
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;content_length.rb</code>: in <code>call</code>

          
          <div class="context" id="c10039176">
              
              <ol start="7" class="pre-context" id="pre10039176">
                
                <li onclick="toggle('pre10039176', 'post10039176')">    include Rack::Utils
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">    def initialize(app)
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">      @app = app
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">    end
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">    def call(env)
</li>
                
              </ol>
              

            <ol start="14" class="context-line">
              <li onclick="toggle('pre10039176', 'post10039176')">      status, headers, body = @app.call(env)<span>...</span></li></ol>

              
              <ol start='15' class="post-context" id="post10039176">
                
                <li onclick="toggle('pre10039176', 'post10039176')">      headers = HeaderHash.new(headers)
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">      if !STATUS_WITH_NO_ENTITY_BODY.include?(status.to_i) &amp;&amp;
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">         !headers[&#x27;Content-Length&#x27;] &amp;&amp;
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">         !headers[&#x27;Transfer-Encoding&#x27;] &amp;&amp;
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">         body.respond_to?(:to_ary)
</li>
                
                <li onclick="toggle('pre10039176', 'post10039176')">
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;thin-1.5.0&#x2F;lib&#x2F;thin&#x2F;connection.rb</code>: in <code>block in pre_process</code>

          
          <div class="context" id="c10035828">
              
              <ol start="74" class="pre-context" id="pre10035828">
                
                <li onclick="toggle('pre10035828', 'post10035828')">
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      # When we&#x27;re under a non-async framework like rails, we can still spawn
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      # off async responses using the callback info, so there&#x27;s little point
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      # in removing this.
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      response = AsyncResponse
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      catch(:async) do
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">        # Process the request calling the Rack adapter
</li>
                
              </ol>
              

            <ol start="81" class="context-line">
              <li onclick="toggle('pre10035828', 'post10035828')">        response = @app.call(@request.env)<span>...</span></li></ol>

              
              <ol start='82' class="post-context" id="post10035828">
                
                <li onclick="toggle('pre10035828', 'post10035828')">      end
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      response
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">    rescue Exception
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      handle_error
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      # Pass through error response
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">      can_persist? &amp;&amp; @request.persistent? ? Response::PERSISTENT_ERROR : Response::ERROR
</li>
                
                <li onclick="toggle('pre10035828', 'post10035828')">    end
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;thin-1.5.0&#x2F;lib&#x2F;thin&#x2F;connection.rb</code>: in <code>catch</code>

          
          <div class="context" id="c10059732">
              
              <ol start="72" class="pre-context" id="pre10059732">
                
                <li onclick="toggle('pre10059732', 'post10059732')">        end
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      end
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      # When we&#x27;re under a non-async framework like rails, we can still spawn
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      # off async responses using the callback info, so there&#x27;s little point
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      # in removing this.
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      response = AsyncResponse
</li>
                
              </ol>
              

            <ol start="79" class="context-line">
              <li onclick="toggle('pre10059732', 'post10059732')">      catch(:async) do<span>...</span></li></ol>

              
              <ol start='80' class="post-context" id="post10059732">
                
                <li onclick="toggle('pre10059732', 'post10059732')">        # Process the request calling the Rack adapter
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">        response = @app.call(@request.env)
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      end
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      response
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">    rescue Exception
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      handle_error
</li>
                
                <li onclick="toggle('pre10059732', 'post10059732')">      # Pass through error response
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;thin-1.5.0&#x2F;lib&#x2F;thin&#x2F;connection.rb</code>: in <code>pre_process</code>

          
          <div class="context" id="c10066728">
              
              <ol start="72" class="pre-context" id="pre10066728">
                
                <li onclick="toggle('pre10066728', 'post10066728')">        end
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      end
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      # When we&#x27;re under a non-async framework like rails, we can still spawn
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      # off async responses using the callback info, so there&#x27;s little point
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      # in removing this.
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      response = AsyncResponse
</li>
                
              </ol>
              

            <ol start="79" class="context-line">
              <li onclick="toggle('pre10066728', 'post10066728')">      catch(:async) do<span>...</span></li></ol>

              
              <ol start='80' class="post-context" id="post10066728">
                
                <li onclick="toggle('pre10066728', 'post10066728')">        # Process the request calling the Rack adapter
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">        response = @app.call(@request.env)
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      end
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      response
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">    rescue Exception
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      handle_error
</li>
                
                <li onclick="toggle('pre10066728', 'post10066728')">      # Pass through error response
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;thin-1.5.0&#x2F;lib&#x2F;thin&#x2F;connection.rb</code>: in <code>process</code>

          
          <div class="context" id="c10074588">
              
              <ol start="47" class="pre-context" id="pre10074588">
                
                <li onclick="toggle('pre10074588', 'post10074588')">    # is ready to be processed.
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">    def process
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">      if threaded?
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">        @request.threaded = true
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">        EventMachine.defer(method(:pre_process), method(:post_process))
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">      else
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">        @request.threaded = false
</li>
                
              </ol>
              

            <ol start="54" class="context-line">
              <li onclick="toggle('pre10074588', 'post10074588')">        post_process(pre_process)<span>...</span></li></ol>

              
              <ol start='55' class="post-context" id="post10074588">
                
                <li onclick="toggle('pre10074588', 'post10074588')">      end
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">    end
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">    def pre_process
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">      # Add client info to the request env
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">      @request.remote_address = remote_address
</li>
                
                <li onclick="toggle('pre10074588', 'post10074588')">
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;thin-1.5.0&#x2F;lib&#x2F;thin&#x2F;connection.rb</code>: in <code>receive_data</code>

          
          <div class="context" id="c10069008">
              
              <ol start="32" class="pre-context" id="pre10069008">
                
                <li onclick="toggle('pre10069008', 'post10069008')">      @response = Response.new
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">    end
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">    # Called when data is received from the client.
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">    def receive_data(data)
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">      @idle = false
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">      trace { data }
</li>
                
              </ol>
              

            <ol start="39" class="context-line">
              <li onclick="toggle('pre10069008', 'post10069008')">      process if @request.parse(data)<span>...</span></li></ol>

              
              <ol start='40' class="post-context" id="post10069008">
                
                <li onclick="toggle('pre10069008', 'post10069008')">    rescue InvalidRequest =&gt; e
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">      log &quot;!! Invalid request&quot;
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">      log_error e
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">      post_process Response::BAD_REQUEST
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">    end
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">
</li>
                
                <li onclick="toggle('pre10069008', 'post10069008')">    # Called when all data was received and the request
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;eventmachine-1.0.0-x86-mingw32&#x2F;lib&#x2F;eventmachine.rb</code>: in <code>run_machine</code>

          
          <div class="context" id="c10078128">
              
              <ol start="180" class="pre-context" id="pre10078128">
                
                <li onclick="toggle('pre10078128', 'post10078128')">        @reactor_running = true
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        initialize_event_machine
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        (b = blk || block) and add_timer(0, b)
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        if @next_tick_queue &amp;&amp; !@next_tick_queue.empty?
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">          add_timer(0) { signal_loopbreak }
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        end
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        @reactor_thread = Thread.current
</li>
                
              </ol>
              

            <ol start="187" class="context-line">
              <li onclick="toggle('pre10078128', 'post10078128')">        run_machine<span>...</span></li></ol>

              
              <ol start='188' class="post-context" id="post10078128">
                
                <li onclick="toggle('pre10078128', 'post10078128')">      ensure
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        until @tails.empty?
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">          @tails.pop.call
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        end
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">        begin
</li>
                
                <li onclick="toggle('pre10078128', 'post10078128')">          release_machine
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;eventmachine-1.0.0-x86-mingw32&#x2F;lib&#x2F;eventmachine.rb</code>: in <code>run</code>

          
          <div class="context" id="c10122624">
              
              <ol start="180" class="pre-context" id="pre10122624">
                
                <li onclick="toggle('pre10122624', 'post10122624')">        @reactor_running = true
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        initialize_event_machine
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        (b = blk || block) and add_timer(0, b)
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        if @next_tick_queue &amp;&amp; !@next_tick_queue.empty?
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">          add_timer(0) { signal_loopbreak }
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        end
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        @reactor_thread = Thread.current
</li>
                
              </ol>
              

            <ol start="187" class="context-line">
              <li onclick="toggle('pre10122624', 'post10122624')">        run_machine<span>...</span></li></ol>

              
              <ol start='188' class="post-context" id="post10122624">
                
                <li onclick="toggle('pre10122624', 'post10122624')">      ensure
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        until @tails.empty?
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">          @tails.pop.call
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        end
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">        begin
</li>
                
                <li onclick="toggle('pre10122624', 'post10122624')">          release_machine
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;thin-1.5.0&#x2F;lib&#x2F;thin&#x2F;backends&#x2F;base.rb</code>: in <code>start</code>

          
          <div class="context" id="c10187832">
              
              <ol start="56" class="pre-context" id="pre10187832">
                
                <li onclick="toggle('pre10187832', 'post10187832')">          @running = true
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">        end
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">        
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">        # Allow for early run up of eventmachine.
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">        if EventMachine.reactor_running?
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">          starter.call
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">        else
</li>
                
              </ol>
              

            <ol start="63" class="context-line">
              <li onclick="toggle('pre10187832', 'post10187832')">          EventMachine.run(&amp;starter)<span>...</span></li></ol>

              
              <ol start='64' class="post-context" id="post10187832">
                
                <li onclick="toggle('pre10187832', 'post10187832')">        end
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">      end
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">      
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">      # Stop of the backend from accepting new connections.
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">      def stop
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">        @running  = false
</li>
                
                <li onclick="toggle('pre10187832', 'post10187832')">        @stopping = true
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;thin-1.5.0&#x2F;lib&#x2F;thin&#x2F;server.rb</code>: in <code>start</code>

          
          <div class="context" id="c10183356">
              
              <ol start="152" class="pre-context" id="pre10183356">
                
                <li onclick="toggle('pre10183356', 'post10183356')">      log   &quot;&gt;&gt; Thin web server (v#{VERSION::STRING} codename #{VERSION::CODENAME})&quot;
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">      debug &quot;&gt;&gt; Debugging ON&quot;
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">      trace &quot;&gt;&gt; Tracing ON&quot;
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">      
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">      log &quot;&gt;&gt; Maximum connections set to #{@backend.maximum_connections}&quot;
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">      log &quot;&gt;&gt; Listening on #{@backend}, CTRL+C to stop&quot;
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">      
</li>
                
              </ol>
              

            <ol start="159" class="context-line">
              <li onclick="toggle('pre10183356', 'post10183356')">      @backend.start<span>...</span></li></ol>

              
              <ol start='160' class="post-context" id="post10183356">
                
                <li onclick="toggle('pre10183356', 'post10183356')">    end
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">    alias :start! :start
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">    
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">    # == Gracefull shutdown
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">    # Stops the server after processing all current connections.
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">    # As soon as this method is called, the server stops accepting
</li>
                
                <li onclick="toggle('pre10183356', 'post10183356')">    # new requests and wait for all current connections to finish.
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;handler&#x2F;thin.rb</code>: in <code>run</code>

          
          <div class="context" id="c10194120">
              
              <ol start="6" class="pre-context" id="pre10194120">
                
                <li onclick="toggle('pre10194120', 'post10194120')">  module Handler
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">    class Thin
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">      def self.run(app, options={})
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">        server = ::Thin::Server.new(options[:Host] || &#x27;0.0.0.0&#x27;,
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">                                    options[:Port] || 8080,
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">                                    app)
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">        yield server if block_given?
</li>
                
              </ol>
              

            <ol start="13" class="context-line">
              <li onclick="toggle('pre10194120', 'post10194120')">        server.start<span>...</span></li></ol>

              
              <ol start='14' class="post-context" id="post10194120">
                
                <li onclick="toggle('pre10194120', 'post10194120')">      end
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">      def self.valid_options
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">        {
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">          &quot;Host=HOST&quot; =&gt; &quot;Hostname to listen on (default: localhost)&quot;,
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">          &quot;Port=PORT&quot; =&gt; &quot;Port to listen on (default: 8080)&quot;,
</li>
                
                <li onclick="toggle('pre10194120', 'post10194120')">        }
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;server.rb</code>: in <code>start</code>

          
          <div class="context" id="c10210872">
              
              <ol start="261" class="pre-context" id="pre10210872">
                
                <li onclick="toggle('pre10210872', 'post10210872')">        if server.respond_to?(:shutdown)
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">          server.shutdown
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">        else
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">          exit
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">        end
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">      end
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">
</li>
                
              </ol>
              

            <ol start="268" class="context-line">
              <li onclick="toggle('pre10210872', 'post10210872')">      server.run wrapped_app, options, &amp;blk<span>...</span></li></ol>

              
              <ol start='269' class="post-context" id="post10210872">
                
                <li onclick="toggle('pre10210872', 'post10210872')">    end
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">    def server
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">      @_server ||= Rack::Handler.get(options[:server]) || Rack::Handler.default(options)
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">    end
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">
</li>
                
                <li onclick="toggle('pre10210872', 'post10210872')">    private
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;lib&#x2F;rack&#x2F;server.rb</code>: in <code>start</code>

          
          <div class="context" id="c10218900">
              
              <ol start="130" class="pre-context" id="pre10218900">
                
                <li onclick="toggle('pre10218900', 'post10218900')">    #      [200, {&#x27;Content-Type&#x27; =&gt; &#x27;text&#x2F;html&#x27;}, [&#x27;hello world&#x27;]]
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    #    end,
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    #    :server =&gt; &#x27;cgi&#x27;
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    #  )
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    #
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    # Further options available here are documented on Rack::Server#initialize
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    def self.start(options = nil)
</li>
                
              </ol>
              

            <ol start="137" class="context-line">
              <li onclick="toggle('pre10218900', 'post10218900')">      new(options).start<span>...</span></li></ol>

              
              <ol start='138' class="post-context" id="post10218900">
                
                <li onclick="toggle('pre10218900', 'post10218900')">    end
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    attr_writer :options
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    # Options may include:
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    # * :app
</li>
                
                <li onclick="toggle('pre10218900', 'post10218900')">    #     a rack application to run (overrides :config)
</li>
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;lib&#x2F;ruby&#x2F;gems&#x2F;1.9.1&#x2F;gems&#x2F;rack-1.4.4&#x2F;bin&#x2F;rackup</code>: in <code>&lt;top (required)&gt;</code>

          
          <div class="context" id="c10238760">
              
              <ol start="1" class="pre-context" id="pre10238760">
                
                <li onclick="toggle('pre10238760', 'post10238760')">#!&#x2F;usr&#x2F;bin&#x2F;env ruby
</li>
                
                <li onclick="toggle('pre10238760', 'post10238760')">
</li>
                
                <li onclick="toggle('pre10238760', 'post10238760')">require &quot;rack&quot;
</li>
                
              </ol>
              

            <ol start="4" class="context-line">
              <li onclick="toggle('pre10238760', 'post10238760')">Rack::Server.start<span>...</span></li></ol>

              
              <ol start='5' class="post-context" id="post10238760">
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;bin&#x2F;rackup</code>: in <code>load</code>

          
          <div class="context" id="c10236984">
              
              <ol start="16" class="pre-context" id="pre10236984">
                
                <li onclick="toggle('pre10236984', 'post10236984')">  if str =~ &#x2F;\A_(.*)_\z&#x2F;
</li>
                
                <li onclick="toggle('pre10236984', 'post10236984')">    version = $1
</li>
                
                <li onclick="toggle('pre10236984', 'post10236984')">    ARGV.shift
</li>
                
                <li onclick="toggle('pre10236984', 'post10236984')">  end
</li>
                
                <li onclick="toggle('pre10236984', 'post10236984')">end
</li>
                
                <li onclick="toggle('pre10236984', 'post10236984')">
</li>
                
                <li onclick="toggle('pre10236984', 'post10236984')">gem &#x27;rack&#x27;, version
</li>
                
              </ol>
              

            <ol start="23" class="context-line">
              <li onclick="toggle('pre10236984', 'post10236984')">load Gem.bin_path(&#x27;rack&#x27;, &#x27;rackup&#x27;, version)<span>...</span></li></ol>

              
              <ol start='24' class="post-context" id="post10236984">
                
              </ol>
              
          </div>
          
      </li>

      <li class="frame">
        <code>g:&#x2F;RubyStack-1.9.3-0&#x2F;ruby&#x2F;bin&#x2F;rackup</code>: in <code>&lt;main&gt;</code>

          
          <div class="context" id="c10253340">
              
              <ol start="16" class="pre-context" id="pre10253340">
                
                <li onclick="toggle('pre10253340', 'post10253340')">  if str =~ &#x2F;\A_(.*)_\z&#x2F;
</li>
                
                <li onclick="toggle('pre10253340', 'post10253340')">    version = $1
</li>
                
                <li onclick="toggle('pre10253340', 'post10253340')">    ARGV.shift
</li>
                
                <li onclick="toggle('pre10253340', 'post10253340')">  end
</li>
                
                <li onclick="toggle('pre10253340', 'post10253340')">end
</li>
                
                <li onclick="toggle('pre10253340', 'post10253340')">
</li>
                
                <li onclick="toggle('pre10253340', 'post10253340')">gem &#x27;rack&#x27;, version
</li>
                
              </ol>
              

            <ol start="23" class="context-line">
              <li onclick="toggle('pre10253340', 'post10253340')">load Gem.bin_path(&#x27;rack&#x27;, &#x27;rackup&#x27;, version)<span>...</span></li></ol>

              
              <ol start='24' class="post-context" id="post10253340">
                
              </ol>
              
          </div>
          
      </li>

  </ul>
</div>

<div id="requestinfo">
  <h2>Request information</h2>

  <h3 id="get-info">GET</h3>
  
    <p>No GET data.</p>
  

  <h3 id="post-info">POST</h3>
  
    <p>No POST data.</p>
  


  <h3 id="cookie-info">COOKIES</h3>
  
    <p>No cookie data.</p>
  

  <h3 id="env-info">Rack ENV</h3>
    <table class="req">
      <thead>
        <tr>
          <th>Variable</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
          
          <tr>
            <td>GATEWAY_INTERFACE</td>
            <td class="code"><div>CGI&#x2F;1.2</div></td>
          </tr>
          
          <tr>
            <td>HTTP_VERSION</td>
            <td class="code"><div>HTTP&#x2F;1.0</div></td>
          </tr>
          
          <tr>
            <td>PATH_INFO</td>
            <td class="code"><div>&#x2F;</div></td>
          </tr>
          
          <tr>
            <td>QUERY_STRING</td>
            <td class="code"><div></div></td>
          </tr>
          
          <tr>
            <td>REMOTE_ADDR</td>
            <td class="code"><div>127.0.0.1</div></td>
          </tr>
          
          <tr>
            <td>REQUEST_METHOD</td>
            <td class="code"><div>GET</div></td>
          </tr>
          
          <tr>
            <td>REQUEST_PATH</td>
            <td class="code"><div>&#x2F;</div></td>
          </tr>
          
          <tr>
            <td>REQUEST_URI</td>
            <td class="code"><div>&#x2F;</div></td>
          </tr>
          
          <tr>
            <td>SCRIPT_NAME</td>
            <td class="code"><div></div></td>
          </tr>
          
          <tr>
            <td>SERVER_NAME</td>
            <td class="code"><div>localhost</div></td>
          </tr>
          
          <tr>
            <td>SERVER_PROTOCOL</td>
            <td class="code"><div>HTTP&#x2F;1.1</div></td>
          </tr>
          
          <tr>
            <td>SERVER_SOFTWARE</td>
            <td class="code"><div>thin 1.5.0 codename Knife</div></td>
          </tr>
          
          <tr>
            <td>async.callback</td>
            <td class="code"><div>#&lt;Method: Thin::Connection#post_process&gt;</div></td>
          </tr>
          
          <tr>
            <td>async.close</td>
            <td class="code"><div>#&lt;EventMachine::DefaultDeferrable:0xe4f0f0&gt;</div></td>
          </tr>
          
          <tr>
            <td>rack.errors</td>
            <td class="code"><div>#&lt;IO:&lt;STDERR&gt;&gt;</div></td>
          </tr>
          
          <tr>
            <td>rack.input</td>
            <td class="code"><div>#&lt;StringIO:0xb61900&gt;</div></td>
          </tr>
          
          <tr>
            <td>rack.multiprocess</td>
            <td class="code"><div>false</div></td>
          </tr>
          
          <tr>
            <td>rack.multithread</td>
            <td class="code"><div>false</div></td>
          </tr>
          
          <tr>
            <td>rack.request.cookie_hash</td>
            <td class="code"><div>{}</div></td>
          </tr>
          
          <tr>
            <td>rack.request.query_hash</td>
            <td class="code"><div>{}</div></td>
          </tr>
          
          <tr>
            <td>rack.request.query_string</td>
            <td class="code"><div></div></td>
          </tr>
          
          <tr>
            <td>rack.run_once</td>
            <td class="code"><div>false</div></td>
          </tr>
          
          <tr>
            <td>rack.url_scheme</td>
            <td class="code"><div>http</div></td>
          </tr>
          
          <tr>
            <td>rack.version</td>
            <td class="code"><div>[1, 0]</div></td>
          </tr>
          
          <tr>
            <td>sinatra.commonlogger</td>
            <td class="code"><div>true</div></td>
          </tr>
          
      </tbody>
    </table>

</div>

<div id="explanation">
  <p>
    You're seeing this error because you use <code>Rack::ShowExceptions</code>.
  </p>
</div>

</body>
</html>
#<Addrinfo: 127.0.0.1:1395 TCP>
[#<Socket:fd 4>, #<Socket:fd 5>]
>Exit code: 0
